# ソースコードメモ
## bundle.js#7404
```javascript
onSearchComplete_handler: function(t) {
    var e = t.cardList; //tがカードリスト
    if (0 == e.length)
        this.maxPage = 0,
        this.thisPage = 0;
    else {
        this.maxPage = t.maxPage,
        this.thisPage = t.thisPage;
        var n = t.regulation;
        _.each(e, function(t, e) {
            t.url = "/card-search/details.php/card/" + t.cardID + "/regu/" + n,
            t.imageUrl = PTC.API_DOMAIN + t.cardThumbFile,
            t.showId = "card-show-id" + e
        }
        .bind(this))
    }
}
```
- tの中身
```
t: Object
cardEnd: 39
cardList: (39) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
cardStart: 1
errMsg: ""
hitCnt: 4038
maxPage: 104
regulation: "XY"
result: 1
searchCondition: ["レギュレーション：スタンダード"]
thisPage: 1
__proto__: Object
```
検索ヒットしたカード情報がたくさん入ってる。

## index.js#17
```javascript
PTC.requrest_complete_action = function(e) {
    _.each(PTC.cardSearchComplete_handlers, function(r) {
        r && r(e)
    }, this)　// this = PTC
```
PTCの中身
```
PTC: Object
    API_DOMAIN: ""
    API_EVENT_DOMAIN: ""
    SERVER_TIME: ""
    cardSearchComplete_handlers: (3) [ƒ, ƒ, ƒ]
    cardSearchEnd_handlers: (5) [ƒ, ƒ, ƒ, ƒ, ƒ]
    cardSearchError_handlers: (2) [ƒ, ƒ]
    cardSearchStart_handlers: (4) [ƒ, ƒ, ƒ, ƒ]
    ...
```
serch系のハンドラーの配列をたくさん持ってる。

### UnderScore.js
`_.each`: underscore.jsというパッケージに備わってる書き方。配列操作(mapなど)の便利な関数が備わっている。_は配列をラップしたオブジェクト。[このアンダースコアは何ですか？](https://living-sun.com/ja/javascript/371791-what-is-this-underscorejs-ldquosafe-referencerdquo-code-doing-javascript-underscorejs.html)

